@{
    ViewData["Title"] = "Payment Debugger";
}

<div class="container text-center" style="margin-top: 150px;">
    
    @if (ViewBag.Status == "Confirmed")
    {
        <div class="alert alert-success">
            <h1><i class="bi bi-check-circle-fill"></i> Success!</h1>
            <p>Database updated to: <strong>Confirmed</strong></p>
        </div>
    }
    else
    {
        <div class="alert alert-danger">
            <h1><i class="bi bi-bug-fill"></i> Payment Failed</h1>
            <hr>
            <h4 class="fw-bold">Error Message from API:</h4>
            
            <div class="bg-white text-danger p-3 rounded border border-danger fw-bold text-start">
                @if (ViewBag.Error != null)
                {
                    @ViewBag.Error
                }
                else
                {
                    <span>Unknown Error (ViewBag.Error is empty)</span>
                }
            </div>
            
            <p class="mt-3">
                <strong>Booking ID:</strong> @Context.Request.Query["bookingId"] <br/>
                <strong>Amount:</strong> @Context.Request.Query["amount"]
            </p>
        </div>
    }
    
    <div class="mt-4">
        <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Go Home</a>
    </div>
</div>